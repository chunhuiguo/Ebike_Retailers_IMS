Math.uuid=(function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(c,d){var h=a,e=[],g=Math.random;d=d||h.length;if(c){for(var i=0;i<c;i++){e[i]=h[0|g()*d]}}else{var b=0,f;e[8]=e[13]=e[18]=e[23]="-";e[14]="4";for(i=0;i<36;i++){if(!e[i]){f=0|g()*16;e[i]=h[(i==19)?(f&3)|8:f&15]}}}return e.join("")}})();var randomUUID=Math.uuid;Fader=function(a){this.element=a.element;this.elementID=a.elementID;this.style=a.style;this.num=a.num;this.maxMove=a.maxMove;this.finishNum="string";this.interval=a.interval||10;this.step=a.step||20;this.onFinish=a.onFinish;this.isFinish=false;this.timer=null;this.method=this.num>=0;this.c=this.elementID?$("#"+this.elementID):this.element;this.run=function(){clearInterval(this.timer);this.fade();if(this.isFinish){this.onFinish&&this.onFinish()}else{var b=this;this.timer=setInterval(function(){b.run()},this.interval)}};this.fade=function(){if(this.finishNum=="string"){this.finishNum=(parseInt(this.c.css(this.style))||0)+this.num}var b=parseInt(this.c.css(this.style))||0;if(this.finishNum>b&&this.method){b+=this.step;if(b>=0){this.finishNum=b=0}}else{if(this.finishNum<b&&!this.method){b-=this.step;if(b*-1>=this.maxMove){this.finishNum=b=this.maxMove*-1}}}if(this.finishNum<=b&&this.method||this.finishNum>=b&&!this.method){this.c.css(this.style,this.finishNum+"px");this.isFinish=true;this.finishNum="string"}else{this.c.css(this.style,b+"px")}}};TabPanel=function(a){this.renderTo=a.renderTo||$(document.body);this.border=a.border;this.render=typeof this.renderTo=="string"?$("#"+this.renderTo):this.renderTo;this.widthResizable=a.widthResizable;this.heightResizable=a.heightResizable;this.autoResizable=a.autoResizable?true:false;this.width=a.width||"100%";this.height=a.height||"100%";this.items=a.items;this.active=a.active||0;this.tabs=[];this.scrolled=false;this.tabWidth=110+4;this.fixNum=2;this.scrollFinish=true;this.maxLength=a.maxLength||-1;this.maxzindex=0;this.init()};TabPanel.prototype={init:function(){var d=this;if(this.autoResizable){this.widthResizable=this.heightResizable=true;this.render.css("overflow","hidden");$(window).resize(function(){window.setTimeout(function(){d.resize()},200)})}this.render.width(this.width);this.render.height(this.height);var e=this.border!="none"?2:0;this.tabpanel=$("<DIV></DIV>");this.tabpanel.addClass("tabpanel");this.tabpanel.width(this.render.width()-e);this.tabpanel.height(this.render.height()-e);this.render.append(this.tabpanel);this.tabpanel_tab_content=$("<DIV></DIV>");this.tabpanel_tab_content.addClass("tabpanel_tab_content");this.tabpanel_tab_content.appendTo(this.tabpanel);this.tabpanel_left_scroll=$("<DIV></DIV>");this.tabpanel_left_scroll.bind("click",function(){d.moveLeft()});this.tabpanel_left_scroll.addClass("tabpanel_left_scroll");this.tabpanel_left_scroll.addClass("display_none");this.tabpanel_left_scroll.bind("mouseover",function(){var f=$(this);f.addClass("tabpanel_scroll_over");f.bind("mouseout",function(){f.unbind("mouseout");f.removeClass("tabpanel_scroll_over")})});this.tabpanel_left_scroll.appendTo(this.tabpanel_tab_content);this.tabpanel_right_scroll=$("<DIV></DIV>");this.tabpanel_right_scroll.bind("click",function(){d.moveRight()});this.tabpanel_right_scroll.addClass("tabpanel_right_scroll");this.tabpanel_right_scroll.addClass("display_none");this.tabpanel_right_scroll.bind("mouseover",function(){var f=$(this);f.addClass("tabpanel_scroll_over");f.bind("mouseout",function(){f.unbind("mouseout");f.removeClass("tabpanel_scroll_over")})});this.tabpanel_right_scroll.appendTo(this.tabpanel_tab_content);this.tabpanel_move_content=$("<DIV></DIV>");this.tabpanel_move_content.addClass("tabpanel_move_content");this.tabpanel_move_content.appendTo(this.tabpanel_tab_content);this.tabpanel_mover=$("<UL></UL>");this.tabpanel_mover.addClass("tabpanel_mover");this.tabpanel_mover.append('<li id="busy"><img src="/js/lib/img/TabPanel/busy.gif"/></li>');this.tabpanel_mover.appendTo(this.tabpanel_move_content);this.tabpanel_tab_spacer=$("<DIV></DIV>");this.tabpanel_tab_spacer.addClass("tabpanel_tab_spacer");this.tabpanel_tab_spacer.appendTo(this.tabpanel_tab_content);this.tabpanel_content=$("<DIV></DIV>");this.tabpanel_content.addClass("tabpanel_content");this.tabpanel_content.appendTo(this.tabpanel);var a=this.tabpanel.width();var c=this.tabpanel.height();if(this.border=="none"){this.tabpanel.css("border","none")}this.tabpanel_tab_content.width(a);this.tabpanel_content.width(a);this.tabpanel_content.height(c-this.tabpanel_tab_content.get(0).offsetHeight);this.update();for(var b=0;b<this.items.length;b++){this.items[b].notExecuteMoveSee=true;this.addTab(this.items[b])}if(this.active>=0){this.show(this.active,false)}},moveLeft:function(){if(this.scrollFinish){this.disableScroll();this.scrollFinish=false;Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:this.tabWidth,maxMove:this.maxMove,onFinish:this.useableScroll}));this.run()}},moveRight:function(){if(this.scrollFinish){this.disableScroll();this.scrollFinish=false;Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:this.tabWidth*-1,maxMove:this.maxMove,onFinish:this.useableScroll}));this.run()}},moveToLeft:function(){if(this.scrolled&&this.scrollFinish){this.disableScroll();this.scrollFinish=false;var a=parseInt(this.tabpanel_mover.css("marginLeft"))*-1;Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:a,maxMove:this.maxMove,interval:20,step:(a/10)<10?10:a/10,onFinish:this.useableScroll}));this.run()}},moveToRight:function(){if(this.scrolled&&this.scrollFinish){this.disableScroll();this.scrollFinish=false;var d=parseInt(this.tabpanel_mover.css("marginLeft"))*-1;var c=this.tabpanel_mover.children().length*this.tabWidth;var a=this.tabpanel_move_content.width();var b=(c-a-d+this.fixNum)*-1;Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:b,maxMove:this.maxMove,step:(b*-1/10)<10?10:b*-1/10,onFinish:this.useableScroll}));this.run()}},moveToSee:function(a){if(this.scrolled){var c=this.tabWidth*a;var b=parseInt(this.tabpanel_mover.css("marginLeft"));var d;if(b<=0){d=(b+c)*-1;if(((d+b)*-1)>=this.maxMove){this.moveToRight()}else{this.disableScroll();this.scrollFinish=false;Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:d,maxMove:this.maxMove,step:(d/10)<10?10:d/10,onFinish:this.useableScroll}));this.run()}}else{d=(c-b)*-1;if((d*-1)>=this.maxMove){this.moveToRight()}else{this.disableScroll();this.scrollFinish=false;Fader.apply(this,new Array({element:this.tabpanel_mover,style:"marginLeft",num:d,maxMove:this.maxMove,onFinish:this.useableScroll}));this.run()}}}},disableScroll:function(){this.tabpanel_left_scroll.addClass("tabpanel_left_scroll_disabled");this.tabpanel_left_scroll.attr("disabled",true);this.tabpanel_right_scroll.addClass("tabpanel_right_scroll_disabled");this.tabpanel_right_scroll.attr("disabled",true)},useableScroll:function(){var a=this;if(this.scrolled){if(parseInt(a.tabpanel_mover.css("marginLeft"))==0){a.tabpanel_left_scroll.addClass("tabpanel_left_scroll_disabled");a.tabpanel_left_scroll.attr("disabled",true);a.tabpanel_right_scroll.removeClass("tabpanel_right_scroll_disabled");a.tabpanel_right_scroll.removeAttr("disabled")}else{if(parseInt(a.tabpanel_mover.css("marginLeft"))*-1==a.maxMove){a.tabpanel_left_scroll.removeClass("tabpanel_left_scroll_disabled");a.tabpanel_left_scroll.removeAttr("disabled",true);a.tabpanel_right_scroll.addClass("tabpanel_right_scroll_disabled");a.tabpanel_right_scroll.attr("disabled")}else{a.tabpanel_left_scroll.removeClass("tabpanel_left_scroll_disabled");a.tabpanel_left_scroll.removeAttr("disabled",true);a.tabpanel_right_scroll.removeClass("tabpanel_right_scroll_disabled");a.tabpanel_right_scroll.removeAttr("disabled")}}}a.scrollFinish=true},update:function(){var a=this.tabpanel_tab_content.width();if(this.scrolled){a-=(this.tabpanel_left_scroll.width()+this.tabpanel_right_scroll.width())}this.tabpanel_move_content.width(a);this.maxMove=(this.tabpanel_mover.children().length*this.tabWidth)-a+this.fixNum},showScroll:function(){var a=this.tabpanel_mover.children().length*this.tabWidth;var b=this.tabpanel_tab_content.width();if(a>b&&!this.scrolled){this.tabpanel_move_content.addClass("tabpanel_move_content_scroll");this.tabpanel_left_scroll.removeClass("display_none");this.tabpanel_right_scroll.removeClass("display_none");this.scrolled=true}else{if(a<b&&this.scrolled){this.moveToLeft();this.tabpanel_move_content.removeClass("tabpanel_move_content_scroll");this.tabpanel_left_scroll.addClass("display_none");this.tabpanel_right_scroll.addClass("display_none");this.scrolled=false;this.scrollFinish=true}}},addTab:function(b){if(this.maxLength!=-1&&this.maxLength<=this.tabs.length){return false}b.id=b.id||Math.uuid();if($("#"+b.id).length>0){this.show(b.id,false)}else{if(this.scrollFinish){var e=this;var c=$("<LI></LI>");c.attr("id",b.id);c.insertBefore("#busy").end();var h=$("<DIV></DIV>");h.text(b.title);h.appendTo(c);var f=b.closable==false?0:5;if(b.icon){h.addClass("icon_title");h.css("background-image",'url("'+b.icon+'")');if(h.width()>(this.tabWidth-35-f)){h.width((this.tabWidth-50-f));h.attr("title",b.title);c.append("<DIV>...</DIV>")}}else{h.addClass("title");if(h.width()>(this.tabWidth-19-f)){h.width((this.tabWidth-30-f));h.attr("title",b.title);c.append("<DIV>...</DIV>")}}var i=$("<DIV></DIV>");i.addClass("closer");i.attr("title","Close tab");i.appendTo(c);var g=$("<DIV></DIV>");g.addClass("html_content");g.appendTo(this.tabpanel_content);var d=g.find("iframe");var a=this.tabpanel_mover.children().index(this.tabpanel_mover.find(".active")[0]);if(a<0){a=0}if(this.tabs.length>a){b.preTabId=this.tabs[a].id}else{b.preTabId=""}b.tab=c;b.title=h;b.closer=i;b.content=g;b.disable=b.disable==undefined?false:b.disable;b.closable=b.closable==undefined?true:b.closable;if(b.closable==false){i.addClass("display_none")}if(b.disabled==true){c.attr("disabled",true);h.addClass(".disabled")}this.tabs.push(b);c.bind("click",function(j){return function(){e.show(j,false)}}(this.tabs.length-1));i.bind("click",function(j){return function(){e.kill(j)}}(this.tabs.length-1));if(b.closable){c.bind("dblclick",function(j){return function(){e.kill(j)}}(this.tabs.length-1))}if(!b.lazyload){this.show(this.tabs.length-1,b.notExecuteMoveSee)}this.showScroll();this.update();if(!b.lazyload&&!b.notExecuteMoveSee){this.moveToRight()}}}},getTabPosision:function(a){if(typeof a=="string"){for(var b=0;b<this.tabs.length;b++){if(a==this.tabs[b].id){a=b;break}}}return a},refresh:function(a){a=this.getTabPosision(a);if(typeof a=="string"){return false}else{var c=this.tabs[a].content.find("iframe");if(c.length>0){var b=this.tabs[a].id+"Frame";this.iterateFlush(window.frames[b])}}},iterateFlush:function(c){if(c.window.frames.length>0){for(var a=0;a<c.window.frames.length;a++){this.iterateFlush(c.window.frames[a])}}else{if(c.document.forms.length>0){for(var a=0;a<c.document.forms.length;a++){try{c.document.forms[a].submit()}catch(b){c.location.reload()}}}else{c.location.reload()}}},show:function(a,b){if(this.tabs.length<1){return false}a=this.getTabPosision(a);if(typeof a=="string"){a=0}if(this.scrollFinish){if(a>=this.tabs.length){a=0}this.tabs[a].content.css("z-index",++this.maxzindex);if(this.tabs[a].tab.hasClass("active")){if(!b){this.moveToSee(a)}}else{if(this.tabs[a].content.html()==""){this.tabs[a].content.html(this.tabs[a].html)}this.tabpanel_mover.find(".active").removeClass("active");this.tabs[a].tab.addClass("active");if(!b){this.moveToSee(a)}}}},kill:function(a){var d=this;a=this.getTabPosision(a);var b=this.tabs[a].preTabId;this.tabs[a].closer.remove();this.tabs[a].title.remove();this.tabs[a].tab.remove();this.tabs[a].content.remove();this.tabs.splice(a,1);for(var c=0;c<this.tabs.length;c++){this.tabs[c].tab.unbind("click");this.tabs[c].tab.bind("click",function(e){return function(){d.show(e,false)}}(c));this.tabs[c].closer.unbind("click");this.tabs[c].closer.bind("click",function(e){return function(){d.kill(e)}}(c));if(this.tabs[c].closable){this.tabs[c].tab.unbind("dblclick");this.tabs[c].tab.bind("dblclick",function(e){return function(){d.kill(e)}}(c))}}this.update();this.showScroll();this.show(b,false)},getTabsCount:function(){return this.tabs.length},setTitle:function(a,b){a=this.getTabPosision(a);if(a<this.tabs.length){this.tabs[a].title.text(b)}},getTitle:function(a){a=this.getTabPosision(a);return this.tabs[a].title.text()},setContent:function(a,b){a=this.getTabPosision(a);if(a<this.tabs.length){this.tabs[a].content.html(b)}},getContent:function(a){a=this.getTabPosision(a);return this.tabs[a].content.html()},setDisable:function(a,b){a=this.getTabPosision(a);if(a<this.tabs.length){this.tabs[a].disable=b;if(b){this.tabs[a].tab.attr("disabled",true);this.tabs[a].title.addClass(".disabled")}else{this.tabs[a].tab.removeAttr("disabled");this.tabs[a].title.removeClass(".disabled")}}},getDisable:function(a){a=this.getTabPosision(a);return this.tabs[a].disable},setClosable:function(a,b){a=this.getTabPosision(a);if(a<this.tabs.length){this.tabs[a].closable=b;if(b){this.tabs[a].closer.addClass("display_none")}else{this.tabs[a].closer.addClass("closer");this.tabs[a].closer.removeClass("display_none")}}},getClosable:function(a){a=this.getTabPosision(a);return this.tabs[a].closable},getActiveIndex:function(){return this.tabpanel_mover.children().index(this.tabpanel_mover.find(".active")[0])},getActiveTab:function(){var a=this.tabpanel_mover.children().index(this.tabpanel_mover.find(".active")[0]);if(this.tabs.length>a){return this.tabs[a]}else{return null}},resize:function(){var b=this.border=="none"?0:2;if(this.widthResizable){this.width=this.render.width();this.tabpanel.width(this.width-b);this.tabpanel_tab_content.width(this.width-b);this.tabpanel_content.width(this.width-b)}if(this.heightResizable){this.height=this.render.height();this.tabpanel.height(this.height-b);this.tabpanel_content.height(this.height-this.tabpanel_tab_content.get(0).offsetHeight)}this.showScroll();this.useableScroll();this.update();var a=this;setTimeout(function(){a.moveToSee(a.getActiveIndex())},200)},setRenderWH:function(a){if(a){if(a.width!=undefined){this.render.width(a.width)}if(a.height!=undefined){this.render.height(a.height)}this.resize()}}};